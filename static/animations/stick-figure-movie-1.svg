<svg id="mainAnimation" viewBox="0 0 1000 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Define the background color animation -->
  <defs>
    <style>
      @keyframes backgroundChange {
        0% { fill: violet; }
        16.66% { fill: indigo; }
        33.33% { fill: blue; }
        50% { fill: green; }
        66.66% { fill: yellow; }
        83.33% { fill: orange; }
        100% { fill: red; }
      }
      
      #background {
        animation: backgroundChange 30s linear forwards;
      }
    </style>
  </defs>
  
  <!-- Background rectangle that will change colors -->
  <rect id="background" x="0" y="0" width="1000" height="600" fill="violet" />
  
  <!-- Town silhouette -->
  <path id="town" d="M0,400 L100,400 L100,300 L150,200 L200,300 L200,400 L300,400 L300,250 L350,200 L400,250 L400,400 L500,400 L500,300 L550,200 L600,300 L600,400 L1000,400 L1000,600 L0,600 Z" fill="black"/>

  <!-- Stick figure hero -->
  <g id="hero">
    <!-- Body parts -->
    <circle cx="50" cy="100" r="10" fill="black">
      <animate attributeName="cx" values="50;900" dur="30s" fill="freeze"/>
      <animate attributeName="cy" values="100;100;100;100;100;100;100" dur="30s" fill="freeze"/>
    </circle>
    <line x1="50" y1="110" x2="50" y2="150" stroke="black" stroke-width="3">
      <animate attributeName="x1" values="50;900" dur="30s" fill="freeze"/>
      <animate attributeName="x2" values="50;900" dur="30s" fill="freeze"/>
    </line>
    <!-- Arms -->
    <line x1="30" y1="130" x2="70" y2="130" stroke="black" stroke-width="3">
      <animate attributeName="x1" values="30;880" dur="30s" fill="freeze"/>
      <animate attributeName="x2" values="70;920" dur="30s" fill="freeze"/>
    </line>
    <!-- Legs -->
    <line x1="50" y1="150" x2="30" y2="180" stroke="black" stroke-width="3">
      <animate attributeName="x1" values="50;900" dur="30s" fill="freeze"/>
      <animate attributeName="x2" values="30;880" dur="30s" fill="freeze"/>
    </line>
    <line x1="50" y1="150" x2="70" y2="180" stroke="black" stroke-width="3">
      <animate attributeName="x1" values="50;900" dur="30s" fill="freeze"/>
      <animate attributeName="x2" values="70;920" dur="30s" fill="freeze"/>
    </line>
  </g>

  <!-- Bad guy -->
  <g id="badGuy">
    <circle cx="900" cy="100" r="10" fill="black"/>
    <line x1="900" y1="110" x2="900" y2="150" stroke="black" stroke-width="3"/>
    <line x1="880" y1="130" x2="920" y2="130" stroke="black" stroke-width="3"/>
    <line x1="900" y1="150" x2="880" y2="180" stroke="black" stroke-width="3"/>
    <line x1="900" y1="150" x2="920" y2="180" stroke="black" stroke-width="3"/>
    
    <!-- Death animation at the end -->
    <animate attributeName="transform" 
             type="rotate"
             from="0 900 100"
             to="90 900 100"
             begin="29s"
             dur="1s"
             fill="freeze"/>
  </g>

  <!-- Gun effect in the final second -->
  <circle cx="900" cy="100" r="0" fill="black">
    <animate attributeName="r"
             values="0;20;0"
             begin="29s"
             dur="1s"
             fill="freeze"/>
  </circle>
</svg>
